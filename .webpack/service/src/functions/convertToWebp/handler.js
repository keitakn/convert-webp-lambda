(()=>{"use strict";var e={444:(e,r,o)=>{o.d(r,{z:()=>a});var t=o(806),s=o.n(t);const a=e=>s()(e)},806:e=>{e.exports=require("@middy/core")},480:e=>{e.exports=require("aws-sdk")},742:e=>{e.exports=require("sharp")},43:e=>{e.exports=require("source-map-support/register")},231:e=>{e.exports=require("uuid")}},r={};function o(t){var s=r[t];if(void 0!==s)return s.exports;var a=r[t]={exports:{}};return e[t](a,a.exports,o),a.exports}o.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return o.d(r,{a:r}),r},o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};(()=>{o.r(t),o.d(t,{main:()=>p}),o(43);var e=o(480),r=o(742),s=o(231),a=o(444);const n=new e.S3,p=(0,a.z)((async e=>{const o=e.Records[0].s3.bucket.name,t=decodeURIComponent(e.Records[0].s3.object.key.replace(/\+/g," ")),a=(await n.getObject({Bucket:o,Key:t}).promise()).Body,p={Body:await r(a).webp({lossless:!0}).toBuffer(),Bucket:process.env.DESTINATION_BUCKET_NAME,ContentType:"image/webp",CacheControl:"max-age=31536000",Key:`encoded/${(0,s.v4)()}.webp`,StorageClass:"STANDARD"};await n.putObject(p).promise()}))})();var s=exports;for(var a in t)s[a]=t[a];t.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();
//# sourceMappingURL=handler.js.map